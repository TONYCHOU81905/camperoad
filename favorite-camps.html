<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>我的收藏營地 - 露途</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto+Mono&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/role-system.css" />
  </head>

  <body>
    <header class="site-header">
      <div class="container">
        <div class="logo">
          <a href="index.html">
            <img src="images/logo.svg" alt="露途 Logo" />
            <span>露途</span>
          </a>
        </div>
        <nav class="main-nav">
          <ul>
            <li><a href="campsites.html">營地預訂</a></li>
            <li><a href="shop.html">裝備商城</a></li>
            <li><a href="camp-guides.html">論壇攻略</a></li>
            <li><a href="#">關於我們</a></li>
          </ul>
        </nav>
        <div class="user-actions">
          <a href="cart.html" class="btn-cart">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-count">0</span>
          </a>
          <a href="user-profile.html" class="btn-login"
            ><i class="fas fa-user"></i
          ></a>
        </div>
        <button class="mobile-menu-toggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </header>

    <div class="user-dashboard-layout">
      <aside class="user-sidebar">
        <nav class="user-nav">
          <ul>
            <li>
              <a href="camper-dashboard.html">
                <i class="fas fa-tachometer-alt"></i>
                <span>儀表板</span>
              </a>
            </li>
            <li>
              <a href="#">
                <i class="fas fa-calendar-alt"></i>
                <span>我的預訂</span>
              </a>
            </li>
            <li>
              <a href="#">
                <i class="fas fa-shopping-bag"></i>
                <span>我的訂單</span>
              </a>
            </li>
            <li class="active">
              <a href="#">
                <i class="fas fa-heart"></i>
                <span>我的收藏</span>
              </a>
              <ul class="sub-menu">
                <li class="active">
                  <a href="favorite-camps.html">收藏營地</a>
                </li>
                <li><a href="#">收藏商品</a></li>
              </ul>
            </li>
            <li>
              <a href="#">
                <i class="fas fa-comment-alt"></i>
                <span>訊息中心</span>
              </a>
            </li>
            <li>
              <a href="#">
                <i class="fas fa-star"></i>
                <span>我的評價</span>
              </a>
            </li>
            <li>
              <a href="user-profile.html">
                <i class="fas fa-cog"></i>
                <span>設定</span>
              </a>
            </li>
          </ul>
        </nav>
      </aside>

      <main class="user-main-content">
        <div class="favorite-camps-container">
          <div class="favorite-header">
            <h1>我的收藏營地</h1>
            <p>管理您收藏的營地，隨時掌握最新資訊和優惠</p>
          </div>

          <div class="favorite-controls">
            <div class="favorite-filter">
              <select name="sort" id="sort-favorites">
                <option value="latest">最近收藏</option>
                <option value="price-high">價格由高至低</option>
                <option value="price-low">價格由低至高</option>
                <option value="rating">評分最高</option>
              </select>
              <div class="view-toggle">
                <button class="btn-grid-view active">
                  <i class="fas fa-th"></i>
                </button>
                <button class="btn-list-view">
                  <i class="fas fa-list"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="favorite-camps-list">
            <!-- 收藏營地卡片 1 -->
            <div class="camp-card favorite-card">
              <div class="camp-image">
                <img src="images/camp-1.jpg" alt="山林星空營地" />
                <span class="camp-tag">人氣王</span>
                <button class="btn-remove-favorite">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <div class="camp-info">
                <h3>山林星空營地</h3>
                <p class="camp-location">
                  <i class="fas fa-map-marker-alt"></i> 新北市三峽區
                </p>
                <div class="camp-rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                  </div>
                  <span class="rating-count">(32)</span>
                </div>
                <div class="camp-features">
                  <span><i class="fas fa-mountain"></i> 山景</span>
                  <span><i class="fas fa-shower"></i> 衛浴</span>
                  <span><i class="fas fa-wifi"></i> 網路</span>
                </div>
                <div class="camp-footer">
                  <div class="camp-price">NT$ 2,800 <span>/ 晚</span></div>
                  <a href="campsite-detail.html" class="btn-view">查看詳情</a>
                </div>
              </div>
            </div>

            <!-- 收藏營地卡片 2 -->
            <div class="camp-card favorite-card">
              <div class="camp-image">
                <img src="images/camp-2.jpg" alt="森林溪畔營地" />
                <span class="camp-tag">新上架</span>
                <button class="btn-remove-favorite">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <div class="camp-info">
                <h3>森林溪畔營地</h3>
                <p class="camp-location">
                  <i class="fas fa-map-marker-alt"></i> 宜蘭縣大同鄉
                </p>
                <div class="camp-rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="far fa-star"></i>
                  </div>
                  <span class="rating-count">(18)</span>
                </div>
                <div class="camp-features">
                  <span><i class="fas fa-tint"></i> 溪流</span>
                  <span><i class="fas fa-campground"></i> 搭棚</span>
                  <span><i class="fas fa-fire"></i> 營火</span>
                </div>
                <div class="camp-footer">
                  <div class="camp-price">NT$ 3,200 <span>/ 晚</span></div>
                  <a href="#" class="btn-view">查看詳情</a>
                </div>
              </div>
            </div>

            <!-- 收藏營地卡片 3 -->
            <div class="camp-card favorite-card">
              <div class="camp-image">
                <img src="images/camp-3.jpg" alt="高原草地營地" />
                <span class="camp-tag">促銷中</span>
                <button class="btn-remove-favorite">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <div class="camp-info">
                <h3>高原草地營地</h3>
                <p class="camp-location">
                  <i class="fas fa-map-marker-alt"></i> 南投縣仁愛鄉
                </p>
                <div class="camp-rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <i class="far fa-star"></i>
                  </div>
                  <span class="rating-count">(24)</span>
                </div>
                <div class="camp-features">
                  <span><i class="fas fa-cloud"></i> 雲海</span>
                  <span><i class="fas fa-bed"></i> 帳篷</span>
                  <span><i class="fas fa-wifi"></i> 網路</span>
                </div>
                <div class="camp-footer">
                  <div class="camp-price">NT$ 2,500 <span>/ 晚</span></div>
                  <a href="#" class="btn-view">查看詳情</a>
                </div>
              </div>
            </div>
          </div>

          <!-- 空收藏狀態 -->
          <div class="empty-favorites" style="display: none">
            <div class="empty-favorites-icon">
              <i class="far fa-heart"></i>
            </div>
            <h2>您尚未收藏任何營地</h2>
            <p>瀏覽營地並點擊愛心圖示將營地加入收藏，方便隨時查看</p>
            <a href="campsites.html" class="btn-browse-camps">瀏覽營地</a>
          </div>
        </div>
      </main>
    </div>

    <script src="js/main.js"></script>
    <script>
      // 收藏營地頁面功能
      document.addEventListener("DOMContentLoaded", function () {
        // 切換檢視模式
        const gridViewBtn = document.querySelector(".btn-grid-view");
        const listViewBtn = document.querySelector(".btn-list-view");
        const favoritesList = document.querySelector(".favorite-camps-list");

        if (gridViewBtn && listViewBtn && favoritesList) {
          gridViewBtn.addEventListener("click", function () {
            favoritesList.classList.remove("list-view");
            gridViewBtn.classList.add("active");
            listViewBtn.classList.remove("active");
          });

          listViewBtn.addEventListener("click", function () {
            favoritesList.classList.add("list-view");
            listViewBtn.classList.add("active");
            gridViewBtn.classList.remove("active");
          });
        }

        // 移除收藏功能
        const removeBtns = document.querySelectorAll(".btn-remove-favorite");
        const emptyState = document.querySelector(".empty-favorites");

        removeBtns.forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.preventDefault();
            const card = this.closest(".camp-card");

            // 動畫效果
            card.style.opacity = "0";
            setTimeout(() => {
              card.remove();

              // 檢查是否還有收藏的營地
              const remainingCards =
                document.querySelectorAll(".favorite-card");
              if (remainingCards.length === 0 && emptyState) {
                emptyState.style.display = "flex";
              }
            }, 300);
          });
        });

        // 排序功能
        const sortSelect = document.getElementById("sort-favorites");
        if (sortSelect) {
          sortSelect.addEventListener("change", function () {
            const cards = Array.from(
              document.querySelectorAll(".favorite-card")
            );
            const sortValue = this.value;

            cards.sort((a, b) => {
              if (sortValue === "price-high") {
                const priceA = parseInt(
                  a
                    .querySelector(".camp-price")
                    .textContent.replace(/[^0-9]/g, "")
                );
                const priceB = parseInt(
                  b
                    .querySelector(".camp-price")
                    .textContent.replace(/[^0-9]/g, "")
                );
                return priceB - priceA;
              } else if (sortValue === "price-low") {
                const priceA = parseInt(
                  a
                    .querySelector(".camp-price")
                    .textContent.replace(/[^0-9]/g, "")
                );
                const priceB = parseInt(
                  b
                    .querySelector(".camp-price")
                    .textContent.replace(/[^0-9]/g, "")
                );
                return priceA - priceB;
              } else if (sortValue === "rating") {
                const ratingA =
                  a.querySelectorAll(".stars .fas").length +
                  a.querySelectorAll(".stars .fa-star-half-alt").length * 0.5;
                const ratingB =
                  b.querySelectorAll(".stars .fas").length +
                  b.querySelectorAll(".stars .fa-star-half-alt").length * 0.5;
                return ratingB - ratingA;
              }
              // 預設為最近收藏，不變更順序
              return 0;
            });

            // 重新排列DOM
            const container = document.querySelector(".favorite-camps-list");
            cards.forEach((card) => container.appendChild(card));
          });
        }
      });
    </script>
  </body>
</html>
