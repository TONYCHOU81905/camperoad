<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>文章類別 - 露營路</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto+Mono&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/role-system.css" />
    <script src="js/camp-data.js"></script>
    <style>
        /* 文章類別樣式 */
        .article-type-hero {
            background-color: #3A5A40;
            color: white;
            padding: 60px 0;
            text-align: center;
        }

        .article-type-hero h1 {
            color: white;
            margin-bottom: 20px;
        }

        .article-type-hero p {
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.1rem;
        }

        .article-type-list {
            padding: 60px 0;
        }

        .article-type-card {
            display: flex;
            margin-bottom: 40px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .article-type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .article-type-image {
            flex: 4;
            position: relative;
            overflow: hidden;
        }

        .article-type-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            aspect-ratio: 10/3;
            transition: transform 0.5s ease;
        }

        .article-type-card:hover .article-type-image img {
            transform: scale(1.05);
        }

        .article-type-content {
            flex: 6;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .article-type-content h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #3A5A40;
        }

        .article-type-content p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .article-count {
            display: inline-block;
            background-color: #E9EDC9;
            color: #3A5A40;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .btn-view-articles {
            align-self: flex-start;
            background-color: #3A5A40;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .btn-view-articles:hover {
            background-color: #2d4731;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(58, 90, 64, 0.2);
        }

        @media (max-width: 768px) {
            .article-type-card {
                flex-direction: column;
            }

            .article-type-image,
            .article-type-content {
                flex: 1;
            }

            .article-type-content {
                padding: 20px;
            }
        }

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .site-footer,
        footer {
            margin-top: auto;
        }
    </style>
</head>

<body>
    <header class="site-header">
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <img src="images/logo.svg" alt="露營路Logo" />
                    <!-- <span>露營路</span> -->
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">營地搜尋</a></li>
                    <li><a href="shop.html">裝備商城</a></li>
                    <li><a href="article-type.html" class="active">論壇攻略</a></li>
                    <li><a href="user-profile.html">關於我們</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <a href="#" class="btn-search"><i class="fas fa-search"></i></a>
                <a href="cart.html" class="btn-cart"><i class="fas fa-shopping-cart"></i><span
                        class="cart-count">0</span></a>
                <a href="login.html" class="btn-login">登入 / 註冊</a>
            </div>
            <button class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <section class="article-type-hero">
        <div class="container">
            <h1>文章類別</h1>
            <p>探索各種露營相關主題，從新手入門技巧到進階營地推薦資訊</p>
        </div>
    </section>

    <section class="article-type-list">
        <div class="container" id="article-type-container">
            <!-- 這裡由 JS 動態產生分類卡片 -->
        </div>
    </section>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="images/logo-white.svg" alt="露營路Logo" />
                    <p>探索自然，體驗生活</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h3>關於我們</h3>
                        <ul>
                            <li><a href="#">公司簡介</a></li>
                            <li><a href="#">服務條款</a></li>
                            <li><a href="#">隱私政策</a></li>
                            <li><a href="#">加入我們</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>營地資訊</h3>
                        <ul>
                            <li><a href="#">北部營地</a></li>
                            <li><a href="#">中部營地</a></li>
                            <li><a href="#">南部營地</a></li>
                            <li><a href="#">東部營地</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>裝備商城</h3>
                        <ul>
                            <li><a href="#">全新商品</a></li>
                            <li><a href="#">配送說明</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>幫助中心</h3>
                        <ul>
                            <li><a href="#">常見問題</a></li>
                            <li><a href="#">使用教學</a></li>
                            <li><a href="#">聯絡客服</a></li>
                            <li><a href="#">緊急聯絡</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-line"></i></a>
                </div>
                <p class="copyright">© 2023 露營路 All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/header-auth.js"></script>
    <script>
        // 取得所有文章類別並渲染
        async function loadArticleTypes() {
            const container = document.getElementById('article-type-container');
            container.innerHTML = '<div class="loading-message">載入中...</div>';
            try {
                // 取得所有分類
                const response = await fetch(`${window.api_prefix}/api/article-types`);
                const result = await response.json();
                const types = result.data || [];
                if (!Array.isArray(types) || types.length === 0) {
                    container.innerHTML = '<div class="loading-message">目前沒有分類</div>';
                    return;
                }
                // 依序取得每個分類的文章數量
                const cards = await Promise.all(types.map(async (type, idx) => {
                    // 取得文章數量
                    let count = '載入中...';
                    try {
                        const countResp = await fetch(`${window.api_prefix}/api/articles/type/${type.acTypeId}/count`);
                        const countResult = await countResp.json();
                        if (countResult.status === 'success') {
                            count = `${countResult.data} 篇文章`;
                        } else {
                            count = '0 篇文章';
                        }
                    } catch {
                        count = '載入失敗';
                    }
                    // 圖片處理（若無則預設）
                    let imgSrc = `images/camp-${(idx % 5) + 1}.jpg`;
                    // 連結處理（依 acTypeId 對應）
                    let link = `articles-list-${idx + 1}.html`;
                    // 卡片 HTML
                    return `
                        <a href="${link}" class="article-type-card">
                            <div class="article-type-image">
                                <img src="${imgSrc}" alt="${type.acTypeKind}" />
                            </div>
                            <div class="article-type-content">
                                <span class="article-count"><i class="fas fa-file-alt"></i> ${count}</span>
                                <h3>${type.acTypeKind}</h3>
                                <p>${type.acTypeText || ''}</p>
                                <div class="btn-view-articles">查看文章 <i class="fas fa-arrow-right"></i></div>
                            </div>
                        </a>
                    `;
                }));
                container.innerHTML = cards.join('');
            } catch (error) {
                container.innerHTML = '<div class="loading-message">載入分類失敗</div>';
                console.error('載入文章分類失敗:', error);
            }
        }
        document.addEventListener('DOMContentLoaded', loadArticleTypes);
    </script>
</body>

</html>